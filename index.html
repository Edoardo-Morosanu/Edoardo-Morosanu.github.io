<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-Frame-Options" content="DENY" />
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />

    <title>Edoardo A. Morosanu</title>

    <link rel="stylesheet" href="css/normalize.css" type="text/css" />
    <link rel="stylesheet" href="css/style.css" type="text/css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

    <script src="js/router.js" defer></script>
    <script>
      const routes = new Map([
        ["home", "pages/home.html"],
        ["about", "pages/about.html"],
        ["projects", "pages/projects.html"],
      ]);

      async function loadContent(hash) {
        const path = hash.replace("#", "") || "home";
        const page = routes.get(path);

        try {
          if (!page) throw new Error("Page not found");

          const response = await fetch(page);
          if (!response.ok)
            throw new Error(`HTTP error! status: ${response.status}`);

          const html = await response.text();
          document.body.innerHTML = new DOMParser().parseFromString(
            html,
            "text/html"
          ).body.innerHTML;
        } catch (error) {
          console.error("Error:", error);
          document.body.innerHTML = `<h1>${error.message}</h1>`;
        }
      }

      window.addEventListener("hashchange", () => {
        loadContent(window.location.hash);
      });

      window.addEventListener("load", () => {
        loadContent(window.location.hash);
      });
    </script>
  </head>
  <body>
    <nav>
      <ul>
        <li><a href="#home">Home</a></li>
        <li><a href="#about">About</a></li>
        <li><a href="#projects">Projects</a></li>
        <li><a href="#nonexistent">Nonexistent Page</a></li>
      </ul>
    </nav>
  </body>
</html>
